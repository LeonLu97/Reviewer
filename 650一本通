
目录
650简介
650核心流程
650常见问题
资料链接
[显示全部]
[ 编辑本段 ]   [ 回目录 ]650简介   
产品定位
eGW650是为了解决跟其他视频系统的互联互通而开发的视频网关，其对接方为符合GB/T 28181协议的视频系统。GB/T 28181作为国标标准，在国内有较广泛的应用

产品特点
容量规格大，单服务器注册用户数可达100000。
eGW650可以实现双向的视频互联互通：一方面，可以通过eGW650访问对端视频系统的视频；另一方面，对端系统也可以通过eGW650访问本系统内移动终端的视频。
支持通过GB/T 28181标准协议，实现对端摄像头的基本的PTZ控制。
支持查询检索回放对端视频。
支持系统间视频设备的GIS信息订阅和上报。

业务功能
注册功能：支持第三方视频平台向eGW650注册，此时eGW650作为上级域；也支持eGW650向第三方视频平台注册，此时eGW650作为下级域。
设备目录查询功能：支持查询eLTE系统管理的手持终端、固定摄像头和自研记录仪信息；也支持查询第三方视频平台管理的固定摄像头信息。
实时视频点播功能：支持eLTE系统对第三方视频平台管理的固定摄像头进行视频监控；支持第三方视频平台对eLTE系统管理的手持终端、固定摄像头和H.265格式自研记录仪进行视频监控；也支持视频伴音功能，伴音的编码格式为G.711（PCMU、PCMA）。
设备控制功能（云台控制）：当固定摄像头支持云台控制功能时，支持对固定摄像头进行云台控制。
历史媒体的检索和回放：支持对指定设备上指定时间段的历史媒体文件进行检索和远程回放；也支持视频伴音功能，伴音的编码格式为G.711（PCMU、PCMA）
订阅和上报视频设备的GIS（Geographic Information System）信息（采用2016版GB/T 28181标准）：支持查询、订阅和上报视频设备的GIS信息。
语音广播：支持eLTE系统终端对第三方系统终端的语音广播业务。
语音对讲：实时视频点播过程中，通过eLTE系统终端和第三方系统终端的语音广播实现语音对讲功能。
组网场景

[ 编辑本段 ]   [ 回目录 ]   

[ 编辑本段 ]   [ 回目录 ]650核心流程   
注册

有鉴权的注册流程:
SIP代理（下级）向SIP服务器（上级）发送REGISTER请求；
SIP服务器向SIP代理发送响应401，并在响应的消息头WWW_Authenticate字段中给出适合SIP代理(下级)的认证体制和参数(加密算法&随机数)；
SIP代理(下级)重新向SIP服务器(上级)发送REGISTER请求，在请求的Authorization字段给出信任书，包含认证信息；
SIP服务器(上级)对请求进行验证，如果检查出SIP代理(下级)身份合法，向SIP代理(下级)发送成功响应200 OK，如果身份不合法则发送拒绝服务应答
无鉴权的注册流程:
SIP代理(下级)向SIP服务器（上级）发送REGISTER请求；
向SIP代理(下级)发送成功响应200 OK
抓包示例


检索和上报

命令流程描述如下：
源设备(上级)向SIP服务器(下级)发送设备查询命令，设备查询命令采用MESSAGE方法携带；
SIP服务器(下级)收到命令后返回200 OK；
SIP服务器(下级)向目标设备转发设备查询命令，设备查询命令采用MESSAGE方法携带；
目标设备收到命令后返回200 OK；
目标设备向SIP服务器(下级)发送设备查询响应命令，设备查询响应命令采用MESSAGE方法携带；
SIP服务器(下级)收到命令后返回200 OK；
SIP服务器(下级)向源设备(上级)转发查询响应命令，设备查询响应命令采用MESSAGE方法携带；
源设备(上级)收到命令后返回200 OK。

抓包示例



订阅&通知

事件订阅流程示意描述如下：
1：事件观察者(上级)向事件源(下级)发送SUBSCRIBE请求，请求消息体携带订阅参数；
2：事件源(下级)应将订阅成功与否的响应消息返回给该事件观察者(上级)。


事件通知流程示意描述如下：
1：在订阅事件触发后事件源(下级)向事件观察者(上级)发送NOTIFY消息，NOTIFY的消息体应携带通知参数；
2：事件观察者(上级)应将通知的响应消息返回给该事件源(下级)
抓包示例



视频点呼
网关做上级场景




视频点呼流程：
MDC 给eGW650 发送Invite消息
eGW650 给下级平台发送Invite消息
下级平台回复200 OK(中间可能有1xx的中间消息，可有可无)
eGW650给下级平台回复ACK
下级平台开始推送流
eGW650接受到流之后解析i帧，解析成功之后，给MDC回复200 OK
MDC回复ACK
eGW650开始推流
抓包示例：
Invite

200OK

媒体流：

SSRC字段：需与200 OK中y值一致








